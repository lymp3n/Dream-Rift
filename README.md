# Dreamforge: Эхо Бездны

Хардкорная текстовая MMORPG с редким дропом и живой экономикой.

## Описание

**Dreamforge: Эхо Бездны** — это текстовая MMORPG, построенная вокруг фундаментальной механики **экстремально редкого дропа** и **живой, игроко-управляемой экономики**. Это игра для одержимых коллекционеров, терпеливых фармеров и безжалостных торговцев.

### Ключевые особенности

- **Система "Сердцевина и Оболочка"**: Разделенный дроп, формирующий экономику
  - **Сердцевина (Soul-Bound)**: Непередаваемый, крайне редкий (0.01-0.1%)
  - **Оболочка (Tradable)**: Передаваемый, редкий (0.5-1%), валюта рынка
- **Биржевая система**: Лимитные ордера, автоматическое сопоставление, история сделок
- **Система крафта**: 1x Сердцевина + Nx Оболочка = Легендарный предмет
- **4 класса персонажей**: Рыцарь Костей, Маг Бездны, Странник Снов, Безклассовый
- **Система навыков**: Библиотека навыков с требованиями по классу и статам
- **Система локаций**: Перемещение между локациями с таймером

## Технологический стек

- **Backend**: Python 3.10+, FastAPI, SQLAlchemy 2.0, SQLite
- **Frontend**: Python CLI с rich и prompt-toolkit
- **Database**: SQLite (MVP)
- **Testing**: pytest

## Установка

### Требования

- Python 3.10+
- pip

### Шаги установки

1. Клонируйте репозиторий:
```bash
git clone <repository-url>
cd Dream-Rift
```

2. Установите зависимости бэкенда:
```bash
cd backend
pip install -r requirements.txt
```

3. Установите зависимости фронтенда:
```bash
cd ../frontend
pip install -r requirements.txt
```

4. Инициализируйте базу данных:
```bash
cd ../backend
python -m backend.src.database.init_db
```

## Запуск

### Быстрый старт (одна команда)

```bash
python run.py
```

Или используйте скрипты:
- Windows: `START.bat`
- Linux/Mac: `./START.sh`

### Ручной запуск

#### Бэкенд

```bash
cd backend
uvicorn backend.src.api.main:app --reload
```

API будет доступен по адресу: `http://127.0.0.1:8000`

Документация Swagger: `http://127.0.0.1:8000/docs`

#### Фронтенд (CLI)

```bash
cd frontend
python -m frontend.cli.main_modern
```

## Структура проекта

```
Dream-Rift/
├── backend/           # Бэкенд приложение
│   ├── src/
│   │   ├── core/     # Игровые системы
│   │   ├── models/   # Модели БД
│   │   ├── api/      # API endpoints
│   │   └── utils/    # Утилиты
│   └── tests/        # Тесты
├── frontend/          # CLI интерфейс
│   └── cli/          # CLI компоненты
├── game_design/       # Конфигурационные файлы
│   ├── balance.json
│   ├── items.json
│   ├── monsters.json
│   └── ...
├── docs/             # Документация
└── orchestrator/     # Оркестрация разработки
```

## Документация

- [Архитектура системы](docs/architecture.md)
- [API Документация](docs/api.md)
- [Игровая механика](docs/gameplay.md)
- [Формулы и баланс](docs/formulas.md)
- [Схема БД](docs/database_schema.md)
- [Система тактик](docs/TACTICS.md)
- [Тайминг боя](docs/COMBAT_TIMING.md)
- [Быстрый старт](README_QUICKSTART.md)

## Тестирование

Запуск тестов:

```bash
cd backend
pytest tests/
```

## Игровая механика

### Система боя (улучшенная)

- Пошаговый бой 1 на 1 с таймингом
- Первый ход: 15 секунд, каждый следующий на 10% быстрее (минимум 5 сек)
- Порядок хода определяется скоростью
- Физический и магический урон
- Критические удары (x1.8 урон)
- Выбор между обычной атакой и навыками
- Некоторые навыки не расходуют ход
- Система тактик для стратегического геймплея

### Система дропа

- **Сердцевина**: Непередаваемый, 0.01-0.1% шанс
- **Оболочка**: Передаваемый, 0.5-1% шанс
- Влияние LUK на шанс дропа

### Система крафта

Формула: `1x Сердцевина + Nx Оболочка = Легендарный предмет`

### Биржевая система

- Лимитные ордера
- Автоматическое сопоставление
- История сделок

## Классы персонажей

1. **Рыцарь Костей**: +2 STR, +2 END/ур. Механика "Костяная броня"
2. **Маг Бездны**: +3 INT, +1 WIS/ур. Механика "Эхо Бездны"
3. **Странник Снов**: +1 INT, +1 WIS, +1 LUK/ур. Механика "Пробуждение"
4. **Безклассовый**: +1 ко всем/ур. Гибкость в навыках

## Формулы

### HP
```
Макс. HP = (30 + (Уровень * 10)) + (STR * 3) + (END * 5)
```

### MP
```
Макс. MP = (20 + (Уровень * 5)) + (INT * 4) + (WIS * 2)
```

### Физический урон
```
Урон = (Сила * 2) + Бонус оружия ±15%
```

### Магический урон
```
Урон = (Интеллект * 1.8) + Бонус ±10%
```

Подробнее в [docs/formulas.md](docs/formulas.md)

## Лицензия

MIT

## Авторы

Разработано через мультиагентную оркестрацию разработки.
